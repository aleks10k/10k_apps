const DOMAIN="http://127.0.0.1:8000/",csrftoken=document.querySelector("[name=csrfmiddlewaretoken]").value;let questions=[],difficulty=localStorage.difficulty?localStorage.difficulty:"medium",hasLetters1=!localStorage.letters_1||JSON.parse(localStorage.letters_1),hasLetters2=!localStorage.letters_2||JSON.parse(localStorage.letters_2),hasLetters3=!localStorage.letters_3||JSON.parse(localStorage.letters_3),hasLetters4=!localStorage.letters_4||JSON.parse(localStorage.letters_4),hasSyllables1=!localStorage.syllables_1||JSON.parse(localStorage.syllables_1),hasSyllables2=!localStorage.syllables_2||JSON.parse(localStorage.syllables_2),hasSyllables3=!localStorage.syllables_3||JSON.parse(localStorage.syllables_3),hasSyllables4=!localStorage.syllables_4||JSON.parse(localStorage.syllables_4),bodyEasy={letters_1:!localStorage.letters_1||JSON.parse(localStorage.letters_1),letters_2:!localStorage.letters_2||JSON.parse(localStorage.letters_2),letters_3:!localStorage.letters_3||JSON.parse(localStorage.letters_3),letters_4:!localStorage.letters_4||JSON.parse(localStorage.letters_4)},bodyMedium={syllables_1:!localStorage.syllables_1||JSON.parse(localStorage.syllables_1),syllables_2:!localStorage.syllables_2||JSON.parse(localStorage.syllables_2),syllables_3:!localStorage.syllables_3||JSON.parse(localStorage.syllables_3),syllables_4:!localStorage.syllables_4||JSON.parse(localStorage.syllables_4)},bodyHard={};class RequestSettings{constructor(t){this.domain=DOMAIN,this.URL="korean/difficulty/",this.difficulty=["easy","medium","hard"].includes(t)?t:"medium"}getBody(){return"easy"===this.difficulty?bodyEasy:"meduim"===this.difficulty?bodyMedium:"hard"===this.difficulty?bodyHard:bodyMedium}getURL(){return this.domain+this.URL+this.difficulty+"/"}}function getQuestions(){let t=new XMLHttpRequest,e=new RequestSettings(difficulty),s=e.getURL();t.open("POST",s,!0),t.responseType="json",t.setRequestHeader("X-CSRFToken",`${csrftoken}`),t.setRequestHeader("Content-Type","json"),t.onreadystatechange=()=>{if(t.readyState===XMLHttpRequest.DONE&&200===t.status)for(i in questions=t.response,questions)showQuestion()},t.send(JSON.stringify(e.getBody()))}getQuestions();class Score{constructor(){this.totalScore=localStorage.totalScore?Number(localStorage.totalScore):0,this.correctScore=localStorage.correctScore?Number(localStorage.correctScore):0}increaseTotal(){this.totalScore+=1,localStorage.totalScore=this.totalScore}increaseCorrect(){this.correctScore+=1,localStorage.correctScore=this.correctScore}setup(){let t=Math.round(this.correctScore/this.totalScore*100);t>79&&(htmlScoreFiller.style.backgroundColor=""),t<80&&t>59&&(htmlScoreFiller.style.backgroundColor="#ff8906"),t<60&&(htmlScoreFiller.style.backgroundColor="#e16162"),0==this.correctScore&&0==this.totalScore?(htmlScoreText.innerText="Answers: 0.",htmlScoreFiller.style.width="0"):(htmlScoreText.innerText=`Total: ${this.totalScore}. Correct: ${this.correctScore} (${t}%).`,htmlScoreFiller.style.width=`${t}%`)}reset(){this.totalScore=0,localStorage.totalScore=0,this.correctScore=0,localStorage.correctScore=0,this.setup()}}let htmlScoreFiller=document.getElementById("js-score-filler"),htmlScoreText=document.getElementById("js-score-text"),htmlResetBtn=document.getElementById("js-reset-score"),score=new Score;score.setup();let htmlQuetsionText=document.getElementById("js-question"),htmlOptionBtn1=document.getElementById("js-option-1"),htmlOptionBtn2=document.getElementById("js-option-2"),htmlOptionBtn3=document.getElementById("js-option-3"),htmlOptionBtn4=document.getElementById("js-option-4");function showQuestion(){htmlQuetsionText.innerText=questions[0].question,htmlOptionBtn1.innerText=questions[0].answer_options[0],htmlOptionBtn2.innerText=questions[0].answer_options[1],htmlOptionBtn3.innerText=questions[0].answer_options[2],htmlOptionBtn4.innerText=questions[0].answer_options[3]}function addOptionBtnEventListener(t){t.addEventListener("click",(t=>{makeButtonsInactive(),checkAnswer(),score.setup(),setTimeout((function(){t.target.style.backgroundColor="",t.target.style.color="",makeButtonsActive(),deleteAnsweredQuestion(),showQuestion(),1==questions.length&&addQuestions()}),700)}))}function makeButtonsInactive(){htmlOptionBtn1.disabled=!0,htmlOptionBtn2.disabled=!0,htmlOptionBtn3.disabled=!0,htmlOptionBtn4.disabled=!0}function makeButtonsActive(){htmlOptionBtn1.disabled=!1,htmlOptionBtn2.disabled=!1,htmlOptionBtn3.disabled=!1,htmlOptionBtn4.disabled=!1}function checkAnswer(){event.target.innerText==questions[0].answer?(playSound(correctAnswer),setColorCorrect(),score.increaseTotal(),score.increaseCorrect()):(playSound(incorrectAnswer),setColorIncorrect(),score.increaseTotal())}function setColorCorrect(){event.target.style.backgroundColor="#2cb67d",event.target.style.color="#f8f5f2"}function setColorIncorrect(){event.target.style.backgroundColor="#f45d48",event.target.style.color="#f8f5f2"}function deleteAnsweredQuestion(){questions.shift()}function addQuestions(){let t=new XMLHttpRequest,e=new RequestSettings(difficulty),s=e.getURL();t.open("POST",s,!0),t.responseType="json",t.setRequestHeader("X-CSRFToken",`${csrftoken}`),t.setRequestHeader("Content-Type","json"),t.onreadystatechange=()=>{if(t.readyState===XMLHttpRequest.DONE&&200===t.status)for(i in t.response)questions.push(t.response[i])},t.send(JSON.stringify(e.getBody()))}htmlResetBtn.addEventListener("click",(()=>{score.reset()})),addOptionBtnEventListener(htmlOptionBtn1),addOptionBtnEventListener(htmlOptionBtn2),addOptionBtnEventListener(htmlOptionBtn3),addOptionBtnEventListener(htmlOptionBtn4);class ApplyButton{constructor(t,e){this.title=t,this.id=e,this.button=document.getElementById(this.id)}getDisabled(){this.button.disabled=!0,this.button.style.opacity="0.25"}getEnabled(){this.button.disabled=!1,this.button.style.opacity=""}apply(){!0===easyBtn.isActive?(difficulty="easy",localStorage.difficulty="easy",bodyEasy.letters_1=letters1Btn.isActive,bodyEasy.letters_2=letters2Btn.isActive,bodyEasy.letters_3=letters3Btn.isActive,bodyEasy.letters_4=letters4Btn.isActive,localStorage.letters_1=letters1Btn.isActive,localStorage.letters_2=letters2Btn.isActive,localStorage.letters_3=letters3Btn.isActive,localStorage.letters_4=letters4Btn.isActive,getQuestions()):!0===mediumBtn.isActive?(difficulty="medium",localStorage.difficulty="medium",bodyMedium.syllables_1=syllables1Btn.isActive,bodyMedium.syllables_2=syllables2Btn.isActive,bodyMedium.syllables_3=syllables3Btn.isActive,bodyMedium.syllables_4=syllables4Btn.isActive,localStorage.syllables_1=syllables1Btn.isActive,localStorage.syllables_2=syllables2Btn.isActive,localStorage.syllables_3=syllables3Btn.isActive,localStorage.syllables_4=syllables4Btn.isActive,getQuestions()):!0===hardBtn.isActive&&(difficulty="hard",localStorage.difficulty="hard",getQuestions()),sidebar.close()}}class CheckButton{constructor(t,e,s,l){this.title=t,this.id=e,this.isActive=s,this.activeStyleClass=l,this.button=document.getElementById(this.id)}getActive(){this.isActive=!0}getInactive(){this.isActive=!1}setActiveStyle(){this.button.classList.add(this.activeStyleClass),this.button.innerText="done"}setDefaultStyle(){this.button.classList.remove(this.activeStyleClass),this.button.innerText="clear"}getActivated(){this.getActive(),this.setActiveStyle()}switch(){!0===this.isActive?(this.getInactive(),this.setDefaultStyle()):(this.getActive(),this.setActiveStyle()),sidebar.check()}}class DiffucultyButton{constructor(t,e,s){this.title=t,this.id=e,this.activeStyleClass=s,this.deactivatedBtns=null,this.hiddenElements=null,this.unhiddenElements=null,this.isActive=difficulty===this.title,this.button=document.getElementById(this.id)}getActive(){this.isActive=!0}deactivateButtons(){let t;for(let e in this.deactivatedBtns)t=this.deactivatedBtns[e],t.isActive=!1,t.setDefaultStyle()}hideElements(){let t;for(let e in this.hiddenElements)t=this.hiddenElements[e],t.hidden=!0}unhideElements(){let t;for(let e in this.unhiddenElements)t=this.unhiddenElements[e],t.hidden=!1}setActiveStyle(){this.button.classList.add(this.activeStyleClass)}setDefaultStyle(){this.button.classList.remove(this.activeStyleClass)}setup(){this.getActive(),this.deactivateButtons(),this.unhideElements(),this.hideElements(),this.setActiveStyle(),sidebar.check()}}class Sidebar{constructor(t){this.id=t,this.sidebar=document.getElementById(this.id)}open(){window.innerWidth<550?(this.sidebar.style.width="85%",this.sidebar.style.borderWidth="2px"):window.innerWidth>=550&&window.innerWidth<1200?(this.sidebar.style.width="45%",this.sidebar.style.borderWidth="2px"):(this.sidebar.style.width="34%",this.sidebar.style.borderWidth="3px")}close(){this.sidebar.style.width="",this.sidebar.style.borderWidth="0px"}switch(){""===this.sidebar.style.width?this.open():this.close()}check(){!0===easyBtn.isActive&&!1===letters1Btn.isActive&&!1===letters2Btn.isActive&&!1===letters3Btn.isActive&&!1===letters4Btn.isActive||!0===mediumBtn.isActive&&!1===syllables1Btn.isActive&&!1===syllables2Btn.isActive&&!1===syllables3Btn.isActive&&!1===syllables4Btn.isActive?(applyButton.getDisabled(),sidebar.showWarning()):(applyButton.getEnabled(),sidebar.hideWarning())}setup(){"easy"===difficulty&&easyBtn.setup(),"medium"===difficulty&&mediumBtn.setup(),"hard"===difficulty&&hardBtn.setup(),!0===letters1Btn.isActive&&letters1Btn.getActivated(),!0===letters2Btn.isActive&&letters2Btn.getActivated(),!0===letters3Btn.isActive&&letters3Btn.getActivated(),!0===letters4Btn.isActive&&letters4Btn.getActivated(),!0===syllables1Btn.isActive&&syllables1Btn.getActivated(),!0===syllables2Btn.isActive&&syllables2Btn.getActivated(),!0===syllables3Btn.isActive&&syllables3Btn.getActivated(),!0===syllables4Btn.isActive&&syllables4Btn.getActivated()}showWarning(){htmlWarningMsg.innerText="At least one of the options has to be selected!",htmlWarningMsg.style.padding="0 0.25rem"}hideWarning(){htmlWarningMsg.innerText="",htmlWarningMsg.style.padding=""}}let htmlSettingsBtn=document.getElementById("js-settings-btn"),htmlCloseSideBtn=document.getElementById("js-close-side-btn"),htmlEasyBtn=document.getElementById("js-easy-btn"),htmlMediumBtn=document.getElementById("js-medium-btn"),htmlHardBtn=document.getElementById("js-hard-btn"),htmlLetters1Btn=document.getElementById("js-letters-1-btn"),htmlLetters2Btn=document.getElementById("js-letters-2-btn"),htmlLetters3Btn=document.getElementById("js-letters-3-btn"),htmlLetters4Btn=document.getElementById("js-letters-4-btn"),htmlSyllables1Btn=document.getElementById("js-syllables-1-btn"),htmlSyllables2Btn=document.getElementById("js-syllables-2-btn"),htmlSyllables3Btn=document.getElementById("js-syllables-3-btn"),htmlSyllables4Btn=document.getElementById("js-syllables-4-btn"),htmlApplyButton=document.getElementById("js-apply-btn"),htmlEasyParameters=document.getElementById("js-easy-params"),htmlMediumParameters=document.getElementById("js-medium-params"),htmlHardParameters=document.getElementById("js-hard-params"),htmlWarningMsg=document.getElementById("js-side-warning");htmlSettingsBtn.addEventListener("click",(()=>{sidebar.switch()})),htmlCloseSideBtn.addEventListener("click",(()=>{sidebar.close()})),htmlEasyBtn.addEventListener("click",(()=>{easyBtn.setup()})),htmlMediumBtn.addEventListener("click",(()=>{mediumBtn.setup()})),htmlHardBtn.addEventListener("click",(()=>{hardBtn.setup()})),htmlLetters1Btn.addEventListener("click",(()=>{letters1Btn.switch()})),htmlLetters2Btn.addEventListener("click",(()=>{letters2Btn.switch()})),htmlLetters3Btn.addEventListener("click",(()=>{letters3Btn.switch()})),htmlLetters4Btn.addEventListener("click",(()=>{letters4Btn.switch()})),htmlSyllables1Btn.addEventListener("click",(()=>{syllables1Btn.switch()})),htmlSyllables2Btn.addEventListener("click",(()=>{syllables2Btn.switch()})),htmlSyllables3Btn.addEventListener("click",(()=>{syllables3Btn.switch()})),htmlSyllables4Btn.addEventListener("click",(()=>{syllables4Btn.switch()})),htmlApplyButton.addEventListener("click",(()=>{applyButton.apply()}));let easyBtn=new DiffucultyButton("easy","js-easy-btn","active--green"),mediumBtn=new DiffucultyButton("medium","js-medium-btn","active--orange"),hardBtn=new DiffucultyButton("hard","js-hard-btn","active--red");easyBtn.deactivatedBtns=[mediumBtn,hardBtn],mediumBtn.deactivatedBtns=[easyBtn,hardBtn],hardBtn.deactivatedBtns=[easyBtn,mediumBtn],easyBtn.hiddenElements=[htmlMediumParameters,htmlHardParameters],mediumBtn.hiddenElements=[htmlEasyParameters,htmlHardParameters],hardBtn.hiddenElements=[htmlEasyParameters,htmlMediumParameters],easyBtn.unhiddenElements=[htmlEasyParameters],mediumBtn.unhiddenElements=[htmlMediumParameters],hardBtn.unhiddenElements=[htmlHardParameters];let letters1Btn=new CheckButton("letters_1","js-letters-1-btn",hasLetters1,"active--green"),letters2Btn=new CheckButton("letters_2","js-letters-2-btn",hasLetters2,"active--green"),letters3Btn=new CheckButton("letters_3","js-letters-3-btn",hasLetters3,"active--green"),letters4Btn=new CheckButton("letters_4","js-letters-4-btn",hasLetters4,"active--green"),syllables1Btn=new CheckButton("syllables_1","js-syllables-1-btn",hasSyllables1,"active--green"),syllables2Btn=new CheckButton("syllables_2","js-syllables-2-btn",hasSyllables2,"active--green"),syllables3Btn=new CheckButton("syllables_3","js-syllables-3-btn",hasSyllables3,"active--green"),syllables4Btn=new CheckButton("syllables_4","js-syllables-4-btn",hasSyllables4,"active--green"),applyButton=new ApplyButton("apply","js-apply-btn"),sidebar=new Sidebar("js-sidebar");sidebar.setup();let muted=!(!localStorage.muted||!["true","false"].includes(localStorage.muted))&&JSON.parse(localStorage.muted),htmlMuteBtn=document.getElementById("js-mute-btn");htmlMuteBtn.addEventListener("click",(()=>{switchMuting()})),!0===muted&&mute();const correctAnswer=new Audio("/static/korean/sounds/correct.mp3"),incorrectAnswer=new Audio("/static/korean/sounds/incorrect.mp3");function playSound(t){1==muted||t.play()}function mute(){htmlMuteBtn.innerText="volume_off",localStorage.muted=!0,muted=!0}function unmute(){htmlMuteBtn.innerText="volume_up",localStorage.muted=!1,muted=!1}function switchMuting(){0==muted?mute():unmute()}