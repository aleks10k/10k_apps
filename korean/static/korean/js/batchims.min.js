const DOMAIN="http://127.0.0.1:8000/",csrftoken=document.querySelector("[name=csrfmiddlewaretoken]").value;let questions=[],hasBatchims1=!localStorage.batchims_1||JSON.parse(localStorage.batchims_1),hasBatchims2=!localStorage.batchims_2||JSON.parse(localStorage.batchims_2),hasBatchims3=!localStorage.batchims_3||JSON.parse(localStorage.batchims_3),body={batchims_1:!localStorage.batchims_1||JSON.parse(localStorage.batchims_1),batchims_2:!localStorage.batchims_2||JSON.parse(localStorage.batchims_2),batchims_3:!localStorage.batchims_3||JSON.parse(localStorage.batchims_3)};class RequestSettings{constructor(){this.domain=DOMAIN,this.URL="korean/difficulty/batchims"}getBody(){return body}getURL(){return this.domain+this.URL+"/"}}function getQuestions(){let t=new XMLHttpRequest,e=new RequestSettings,s=e.getURL();t.open("POST",s,!0),t.responseType="json",t.setRequestHeader("X-CSRFToken",`${csrftoken}`),t.setRequestHeader("Content-Type","json"),t.onreadystatechange=()=>{if(t.readyState===XMLHttpRequest.DONE&&200===t.status)for(i in questions=t.response,questions)showQuestion()},t.send(JSON.stringify(e.getBody()))}getQuestions();class Score{constructor(){this.totalScore2=localStorage.totalScore2?Number(localStorage.totalScore2):0,this.correctScore2=localStorage.correctScore2?Number(localStorage.correctScore2):0}increaseTotal(){this.totalScore2+=1,localStorage.totalScore2=this.totalScore2}increaseCorrect(){this.correctScore2+=1,localStorage.correctScore2=this.correctScore2}setup(){let t=Math.round(this.correctScore2/this.totalScore2*100);t>79&&(htmlScoreFiller.style.backgroundColor=""),t<80&&t>59&&(htmlScoreFiller.style.backgroundColor="#ff8906"),t<60&&(htmlScoreFiller.style.backgroundColor="#e16162"),0==this.correctScore2&&0==this.totalScore2?(htmlScoreText.innerText="Answers: 0.",htmlScoreFiller.style.width="0"):(htmlScoreText.innerText=`Total: ${this.totalScore2}. Correct: ${this.correctScore2} (${t}%).`,htmlScoreFiller.style.width=`${t}%`)}reset(){this.totalScore2=0,localStorage.totalScore2=0,this.correctScore2=0,localStorage.correctScore2=0,this.setup()}}let htmlScoreFiller=document.getElementById("js-score-filler"),htmlScoreText=document.getElementById("js-score-text"),htmlResetBtn=document.getElementById("js-reset-score"),score=new Score;score.setup();let htmlQuetsionText=document.getElementById("js-question"),htmlOptionBtn1=document.getElementById("js-option-1"),htmlOptionBtn2=document.getElementById("js-option-2"),htmlOptionBtn3=document.getElementById("js-option-3"),htmlOptionBtn4=document.getElementById("js-option-4");function showQuestion(){htmlQuetsionText.innerText=questions[0].question,htmlOptionBtn1.innerText=questions[0].answer_options[0],htmlOptionBtn2.innerText=questions[0].answer_options[1],htmlOptionBtn3.innerText=questions[0].answer_options[2],htmlOptionBtn4.innerText=questions[0].answer_options[3]}function addOptionBtnEventListener(t){t.addEventListener("click",(t=>{makeButtonsInactive(),checkAnswer(),score.setup(),setTimeout((function(){t.target.style.backgroundColor="",t.target.style.color="",makeButtonsActive(),deleteAnsweredQuestion(),showQuestion(),1==questions.length&&addQuestions()}),700)}))}function makeButtonsInactive(){htmlOptionBtn1.disabled=!0,htmlOptionBtn2.disabled=!0,htmlOptionBtn3.disabled=!0,htmlOptionBtn4.disabled=!0}function makeButtonsActive(){htmlOptionBtn1.disabled=!1,htmlOptionBtn2.disabled=!1,htmlOptionBtn3.disabled=!1,htmlOptionBtn4.disabled=!1}function checkAnswer(){event.target.innerText==questions[0].answer?(playSound(correctAnswer),setColorCorrect(),score.increaseTotal(),score.increaseCorrect()):(playSound(incorrectAnswer),setColorIncorrect(),score.increaseTotal())}function setColorCorrect(){event.target.style.backgroundColor="#2cb67d",event.target.style.color="#f8f5f2"}function setColorIncorrect(){event.target.style.backgroundColor="#f45d48",event.target.style.color="#f8f5f2"}function deleteAnsweredQuestion(){questions.shift()}function addQuestions(){let t=new XMLHttpRequest,e=new RequestSettings,s=e.getURL();t.open("POST",s,!0),t.responseType="json",t.setRequestHeader("X-CSRFToken",`${csrftoken}`),t.setRequestHeader("Content-Type","json"),t.onreadystatechange=()=>{if(t.readyState===XMLHttpRequest.DONE&&200===t.status)for(i in t.response)questions.push(t.response[i])},t.send(JSON.stringify(e.getBody()))}htmlResetBtn.addEventListener("click",(()=>{score.reset()})),addOptionBtnEventListener(htmlOptionBtn1),addOptionBtnEventListener(htmlOptionBtn2),addOptionBtnEventListener(htmlOptionBtn3),addOptionBtnEventListener(htmlOptionBtn4);class ApplyButton{constructor(t,e){this.title=t,this.id=e,this.button=document.getElementById(this.id)}getDisabled(){this.button.disabled=!0,this.button.style.opacity="0.25"}getEnabled(){this.button.disabled=!1,this.button.style.opacity=""}apply(){body.batchims_1=batchims1Btn.isActive,body.batchims_2=batchims2Btn.isActive,body.batchims_3=batchims3Btn.isActive,localStorage.batchims_1=batchims1Btn.isActive,localStorage.batchims_2=batchims2Btn.isActive,localStorage.batchims_3=batchims3Btn.isActive,getQuestions(),sidebar.close()}}class CheckButton{constructor(t,e,s,n){this.title=t,this.id=e,this.isActive=s,this.activeStyleClass=n,this.button=document.getElementById(this.id)}getActive(){this.isActive=!0}getInactive(){this.isActive=!1}setActiveStyle(){this.button.classList.add(this.activeStyleClass),this.button.innerText="done"}setDefaultStyle(){this.button.classList.remove(this.activeStyleClass),this.button.innerText="clear"}getActivated(){this.getActive(),this.setActiveStyle()}switch(){!0===this.isActive?(this.getInactive(),this.setDefaultStyle()):(this.getActive(),this.setActiveStyle()),sidebar.check()}}class Sidebar{constructor(t){this.id=t,this.sidebar=document.getElementById(this.id)}open(){window.innerWidth<550?(this.sidebar.style.width="85%",this.sidebar.style.borderWidth="2px"):window.innerWidth>=550&&window.innerWidth<1200?(this.sidebar.style.width="45%",this.sidebar.style.borderWidth="2px"):(this.sidebar.style.width="34%",this.sidebar.style.borderWidth="3px")}close(){this.sidebar.style.width="",this.sidebar.style.borderWidth="0px"}switch(){""===this.sidebar.style.width?this.open():this.close()}check(){!1===batchims1Btn.isActive&&!1===batchims2Btn.isActive&&!1===batchims3Btn.isActive?(applyButton.getDisabled(),sidebar.showWarning()):(applyButton.getEnabled(),sidebar.hideWarning())}setup(){!0===batchims1Btn.isActive&&batchims1Btn.getActivated(),!0===batchims2Btn.isActive&&batchims2Btn.getActivated(),!0===batchims3Btn.isActive&&batchims3Btn.getActivated()}showWarning(){htmlWarningMsg.innerText="At least one of the options has to be selected!",htmlWarningMsg.style.padding="0 0.25rem"}hideWarning(){htmlWarningMsg.innerText="",htmlWarningMsg.style.padding=""}}let htmlSettingsBtn=document.getElementById("js-settings-btn"),htmlCloseSideBtn=document.getElementById("js-close-side-btn"),htmlBatchims1Btn=document.getElementById("js-batchims-1-btn"),htmlBatchims2Btn=document.getElementById("js-batchims-2-btn"),htmlBatchims3Btn=document.getElementById("js-batchims-3-btn"),htmlApplyButton=document.getElementById("js-apply-btn"),htmlWarningMsg=document.getElementById("js-side-warning");htmlSettingsBtn.addEventListener("click",(()=>{sidebar.switch()})),htmlCloseSideBtn.addEventListener("click",(()=>{sidebar.close()})),htmlBatchims1Btn.addEventListener("click",(()=>{batchims1Btn.switch()})),htmlBatchims2Btn.addEventListener("click",(()=>{batchims2Btn.switch()})),htmlBatchims3Btn.addEventListener("click",(()=>{batchims3Btn.switch()})),htmlApplyButton.addEventListener("click",(()=>{applyButton.apply()}));let batchims1Btn=new CheckButton("batchims_1","js-batchims-1-btn",hasBatchims1,"active--green"),batchims2Btn=new CheckButton("batchims_2","js-batchims-2-btn",hasBatchims2,"active--green"),batchims3Btn=new CheckButton("batchims_3","js-batchims-3-btn",hasBatchims3,"active--green"),applyButton=new ApplyButton("apply","js-apply-btn"),sidebar=new Sidebar("js-sidebar");sidebar.setup();let muted=!(!localStorage.muted||!["true","false"].includes(localStorage.muted))&&JSON.parse(localStorage.muted),htmlMuteBtn=document.getElementById("js-mute-btn");htmlMuteBtn.addEventListener("click",(()=>{switchMuting()})),!0===muted&&mute();const correctAnswer=new Audio("/static/korean/sounds/correct.mp3"),incorrectAnswer=new Audio("/static/korean/sounds/incorrect.mp3");function playSound(t){1==muted||t.play()}function mute(){htmlMuteBtn.innerText="volume_off",localStorage.muted=!0,muted=!0}function unmute(){htmlMuteBtn.innerText="volume_up",localStorage.muted=!1,muted=!1}function switchMuting(){0==muted?mute():unmute()}